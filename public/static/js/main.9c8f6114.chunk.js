(this["webpackJsonpreact-blog"]=this["webpackJsonpreact-blog"]||[]).push([[0],{100:function(e,t,a){e.exports={Rate:"ArticleRate_Rate__3n8KO",Button:"ArticleRate_Button__3rAsg",HorLine:"ArticleRate_HorLine__1_DoA"}},140:function(e,t,a){e.exports={MoreButton:"Main_MoreButton__1TJzB",Main:"Main_Main__1g2x6"}},141:function(e,t,a){e.exports={Logo:"Heading_Logo__3zPSh",NewCommentRef:"Heading_NewCommentRef__2HpJ1",Navbar:"Heading_Navbar__3r5Yl"}},224:function(e,t,a){e.exports=a(450)},229:function(e,t,a){},25:function(e,t,a){e.exports={ViewArticleContainer:"ArticleCard_ViewArticleContainer__3Z6CP",Article:"ArticleCard_Article__1Fwq0",Info:"ArticleCard_Info__2frWV",Title:"ArticleCard_Title__30hz2",ImageContainer:"ArticleCard_ImageContainer__2ySJx",Image:"ArticleCard_Image__3um7j",ArticleMain:"ArticleCard_ArticleMain__1oZ7A",HorLine:"ArticleCard_HorLine__2S7XW"}},40:function(e,t,a){e.exports={ViewArticleContainer:"ViewArticle_ViewArticleContainer__JNONN",Article:"ViewArticle_Article__1OS1h",Info:"ViewArticle_Info__4B8Zo",Title:"ViewArticle_Title__dhUNw",ImageContainer:"ViewArticle_ImageContainer__3SykP",Image:"ViewArticle_Image__yUnwt",ArticleMain:"ViewArticle_ArticleMain__2laaM",NewCommentRef:"ViewArticle_NewCommentRef__308R0"}},45:function(e,t,a){e.exports={CommentCardContainer:"CommentCard_CommentCardContainer__3sFC8",Comment:"CommentCard_Comment__1t28v",Image:"CommentCard_Image__15k2G",CommentMain:"CommentCard_CommentMain__1Pdjh",Info:"CommentCard_Info__1dpYW",HorLine:"CommentCard_HorLine__xhY0Q"}},450:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(37),c=a.n(i),l=(a(229),a(38)),o=a(29),s=a(69),u=a(58),m=a(42),d=Object(s.b)({firebase:u.firebaseReducer}),f=Object(s.c)(d,{}),g={firebase:m,config:{},dispatch:f.dispatch};var h=a(13),p=a(14),b=a(16),v=a(15),C=a(11),E=a(451),_=a(452);a(406);m.initializeApp({apiKey:"AIzaSyA1YZtMb3vyqkdAVpclIghDM6GAHaZocpM",authDomain:"react-blog-a39d2.firebaseapp.com",databaseURL:"https://react-blog-a39d2.firebaseio.com",projectId:"react-blog-a39d2",storageBucket:"react-blog-a39d2.appspot.com",messagingSenderId:"47960617433",appId:"1:47960617433:web:ab66e92b01deaaf62169c8"}),m.firestore();var y,I=m,k={signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[I.auth.signInAnonymously,I.auth.GoogleAuthProvider.PROVIDER_ID]},O=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){return Object(h.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement(_.a,{uiConfig:k,color:"danger",firebaseAuth:I.auth(),block:!0,onClick:function(){I.auth().signInAnonymously()}},"Get my oldthink name"))}}]),a}(n.Component),A=(Object(o.b)((function(e){var t=e.firebase;return{auth:t.auth,profile:t.profile}}))(O),a(40)),R=a.n(A),j=a(59),w=a.n(j),N=a(458),M=a(19),x=a.n(M),S=a(32),D=a(9),L=a(30),U=a(468),B=a(453),T=a(454),F=a(455),V=a(456),H=a(457),Q=a(60),P=a.n(Q),z=a(70),q=a.n(z),G=a(98),Y=a.n(G),Z=(a(216),a(467)),J=a(99),W=a.n(J),K=I.firestore(),X=I.storage(),$=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).modules={toolbar:{container:[[{size:[]}],["bold","italic","underline","strike"],["link"]],handlers:{image:function(){return n.quillImageCallBack()}}},clipboard:{matchVisual:!1}},n.formats=["header","font","size","bold","italic","underline","strike","link"],n.attachQuillRefs=function(){"function"===typeof n.reactQuillRef.getEditor&&(n.quillRef=n.reactQuillRef.getEditor())},n.onChangeCommentContent=function(e){var t=n.quillRef;t.on("text-change",(function(e,a,n){t.getLength()>1e4&&t.deleteText(1e4,t.getLength())})),n.setState({comment:Object(D.a)(Object(D.a)({},n.state.comment),{},{content:e})})},n.submitComment=function(){var e=window.location.pathname.slice(9);n.state.comment.createUserID=I.auth().currentUser.uid,n.setState({hasFeatureImage:!1,comment:Object(D.a)(Object(D.a)({},n.state.comment),{},{createDate:new Date})},(function(){K.collection("Articles").doc(e).collection("Comments").add(n.state.comment).then((function(e){})).catch((function(e){return console.log(e)})),n.reactQuillRef.getEditor().deleteText(0,n.reactQuillRef.getEditor().getLength()),n.setState({isModalOpen:!n.state.isModalOpen,comment:Object(D.a)(Object(D.a)({},n.state.comment),{},{featureImage:"",content:""})})})),K.collection("Articles").doc(e).update({commentCount:I.firestore.FieldValue.increment(1)}),y.reset()},n.fileCompress=function(e){return new Promise((function(t,a){new W.a(e,{file:"File",quality:.5,maxWidth:640,maxHeight:640,success:function(e){return t({success:!0,file:e})},error:function(e){return t({success:!1,message:e.message})}})}))},n.deleteImageCallBack=function(e){var t=n.state.comment.featureImage.slice(86,122);X.ref().child("Comments/"+t).delete().then((function(){n.setState({hasFeatureImage:!1,comment:Object(D.a)(Object(D.a)({},n.state.comment),{},{featureImage:""})}),console.log("file deleted!"+n.state.comment.featureImage)})).catch((function(e){console.log("nothing to delete!")}))},n.uploadImageCallBack=function(e){return new Promise(function(){var t=Object(S.a)(x.a.mark((function t(a,n){var r,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.target.files[0],i=Object(Z.a)(),X.ref().child("Comments/"+i).put(r).then(function(){var e=Object(S.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.ref().child("Comments/"+i).getDownloadURL();case 2:n=e.sent,a({success:!0,data:{link:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},n.toggleModal=function(){n.setState({isModalOpen:!n.state.isModalOpen})},n.verifyCallback=n.verifyCallback.bind(Object(L.a)(n)),n.expiredCallback=n.expiredCallback.bind(Object(L.a)(n)),n.onChangeCommentContent=n.onChangeCommentContent.bind(Object(L.a)(n)),n.quillRef=null,n.reactQuillRef=null,n.state={isModalOpen:!1,isVerified:!1,hasFeatureImage:!1,comment:{commentID:"",content:"",createDate:"",featureImage:"",createUserID:""}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.attachQuillRefs()}},{key:"componentDidUpdate",value:function(){this.attachQuillRefs()}},{key:"verifyCallback",value:function(e){e&&this.setState({isVerified:!0})}},{key:"expiredCallback",value:function(){this.setState({isVerified:!1})}},{key:"render",value:function(){var e=this;var t,a=this.state.isVerified&&((t=this.state.comment.content,null!==t&&""!==t&&(t=t.toString()).replace(/(<([^>]+)>)/gi,"")).length>=1||0!=this.state.comment.featureImage.length);return r.a.createElement(E.a,{className:P.a.NewCommentMain},r.a.createElement(U.a,{isOpen:this.state.isModalOpen},r.a.createElement(B.a,{toggle:function(){return e.setState({isModalOpen:!e.state.isModalOpen})}}," ",r.a.createElement(T.a,null,r.a.createElement(F.a,{type:"file",accept:"image/*",className:P.a.ImageUploader,onChange:function(){var t=Object(S.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uploadImageCallBack(a);case 2:(n=t.sent).success&&(e.setState({hasFeatureImage:!0,comment:Object(D.a)(Object(D.a)({},e.state.comment),{},{featureImage:n.data.link})}),console.log("Comment Image has been uploaded to:"+n.data.link));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),this.state.hasFeatureImage?r.a.createElement("header",{className:P.a.ImageUploaded},r.a.createElement("img",{src:this.state.comment.featureImage,className:P.a.FeatureImg}),r.a.createElement(_.a,{onClick:function(){return e.deleteImageCallBack()}},"X")):"")),r.a.createElement(V.a,null," ",r.a.createElement(T.a,null,r.a.createElement(q.a,{ref:function(t){return e.reactQuillRef=t},value:this.state.comment.content,onChange:function(t){return e.onChangeCommentContent(t)},placeholder:"Type in a comment...",theme:"snow",modules:this.modules,formats:this.formats})),r.a.createElement(T.a,null,r.a.createElement(Y.a,{ref:function(e){return y=e},sitekey:"6LeF59IZAAAAAK3nudAyu9wQDemGRHGN1LltZ95C",render:"explicit",verifyCallback:this.verifyCallback,expiredCallback:this.expiredCallback}))),r.a.createElement(H.a,null," ",a?r.a.createElement(T.a,null,r.a.createElement(_.a,{style:{borderRadius:0},color:"dark",onClick:function(t){return e.submitComment()}}," ","SUBMIT")):r.a.createElement(T.a,null,r.a.createElement(_.a,{style:{borderRadius:0},color:"dark",disabled:!0}," ","SUBMIT")))),r.a.createElement(T.a,{style:{textAlign:"center"}}," ",r.a.createElement(_.a,{style:{borderRadius:0},size:"sm",outline:!0,color:"dark",onClick:function(t){return e.toggleModal()}}," ","CREATE A REPLY")),r.a.createElement(q.a,{className:P.a.TextEditor,ref:function(t){return e.reactQuillRef=t},value:this.state.comment.content,onChange:function(t){return e.onChangeCommentContent(t)},placeholder:"Type in a comment...",theme:"snow",modules:this.modules,formats:this.formats}))}}]),a}(n.Component),ee=I.firestore(),te=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).modalRef=function(e){var t=e.toggleModal;n.showModal=t},n.onCommentClick=function(){n.showModal()},n.getArticleByID=function(e){ee.collection("Articles").doc(e).get().then((function(e){e.exists?n.setState({article:e.data()},(function(){n.setState({isLoaded:!0})})):n.props.history.push({pathname:"/"})}))},n.timeStampToString=function(e){var t=new Date(1e3*e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()},n.state={article:{},isLoaded:!1},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;"undefined"!==typeof this.props.location.state?this.props.location.state.hasOwnProperty("article")&&this.setState({article:this.props.location.state.article},(function(){e.setState({isLoaded:!0})})):this.getArticleByID(this.props.match.params.id)}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",null,r.a.createElement(E.a,{className:R.a.ViewArticleContainer},r.a.createElement("div",{className:R.a.Article},r.a.createElement("div",{className:R.a.ArticleInfo},r.a.createElement("header",{className:R.a.Title},this.state.article.title)),r.a.createElement("div",{className:R.a.ImageContainer},r.a.createElement("img",{className:R.a.Image,src:this.state.article.featureImage,alt:this.state.article.title})),r.a.createElement("div",{className:R.a.ArticleMain},w()(this.state.article.content))),r.a.createElement("div",{className:R.a.Info}," ",r.a.createElement(N.a,{style:{marginRight:4}},this.state.article.createUserID.slice(0,7)),r.a.createElement(N.a,{style:{marginRight:4}}," ",this.timeStampToString(this.state.article.createDate.seconds)),r.a.createElement(N.a,null,this.state.article.commentCount)))):r.a.createElement("div",null,"loading...")}}]),a}(n.Component),ae=Object(C.g)(te),ne=a(459),re=a(460),ie=a(71),ce=a.n(ie),le=I.firestore(),oe=I.storage(),se=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).modules={toolbar:{container:[[{size:[]}],["bold","italic","underline","strike"],["link"]],handlers:{image:function(){return n.quillImageCallBack()}}},clipboard:{matchVisual:!1}},n.formats=["header","font","size","bold","italic","underline","strike","link"],n.attachQuillRefs=function(){"function"===typeof n.reactQuillRef.getEditor&&(n.quillRef=n.reactQuillRef.getEditor())},n.onChangeArticleTitle=function(e){n.setState({article:Object(D.a)(Object(D.a)({},n.state.article),{},{title:e})})},n.onChangeArticleContent=function(e){var t=n.quillRef;t.on("text-change",(function(e,a,n){t.getLength()>15e3&&t.deleteText(15e3,t.getLength())})),n.setState({article:Object(D.a)(Object(D.a)({},n.state.article),{},{content:e})})},n.submitArticle=function(){var e=n.state.article;e.createUserID=n.props.auth.uid,le.collection("Articles").add(e).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),n.props.history.push("/")},n.fileCompress=function(e){return new Promise((function(t,a){new W.a(e,{file:"File",quality:.5,maxWidth:640,maxHeight:640,success:function(e){return t({success:!0,file:e})},error:function(e){return t({success:!1,message:e.message})}})}))},n.quillImageCallBack=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=Object(S.a)(x.a.mark((function t(){var a,r,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.files[0],t.next=3,n.fileCompress(a);case 3:(r=t.sent).success&&(i=Object(Z.a)(),oe.ref().child("Articles/"+i).put(r.file).then(function(){var e=Object(S.a)(x.a.mark((function e(t){var a,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.ref().child("Articles/"+i).getDownloadURL();case 2:a=e.sent,r=n.quill.getEditor(),c=r.getSelection(!0),r.insertEmbed(c.index,"image",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t)})))},n.deleteImageCallBack=function(e){var t=n.state.article.featureImage.slice(86,122);oe.ref().child("Articles/"+t).delete().then((function(){n.setState({hasFeatureImage:!1,article:Object(D.a)(Object(D.a)({},n.state.article),{},{featureImage:""})}),console.log("file deleted!"+n.state.article.featureImage)})).catch((function(e){console.log("nothing to delete!")}))},n.uploadImageCallBack=function(e){return new Promise(function(){var t=Object(S.a)(x.a.mark((function t(a,n){var r,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.target.files[0],i=Object(Z.a)(),oe.ref().child("Articles/"+i).put(r).then(function(){var e=Object(S.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.ref().child("Articles/"+i).getDownloadURL();case 2:n=e.sent,a({success:!0,data:{link:n}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())},n.verifyCallback=n.verifyCallback.bind(Object(L.a)(n)),n.expiredCallback=n.expiredCallback.bind(Object(L.a)(n)),n.onChangeArticleContent=n.onChangeArticleContent.bind(Object(L.a)(n)),n.quillRef=null,n.reactQuillRef=null,n.state={isVerified:!1,isModalOpen:!0,article:{title:"",content:"",createDate:new Date,featureImage:"",positiveRatings:0,negativeRatings:0,createUserID:""}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.attachQuillRefs()}},{key:"componentDidUpdate",value:function(){this.attachQuillRefs()}},{key:"verifyCallback",value:function(e){e&&this.setState({isVerified:!0})}},{key:"expiredCallback",value:function(){this.setState({isVerified:!1})}},{key:"render",value:function(){var e=this;var t,a=(t=this.state.article.content,null!==t&&""!==t&&(t=t.toString()).replace(/(<([^>]+)>)/gi,"")).length>=1&&this.state.article.title.length>=1&&0!=this.state.article.featureImage.length&&this.state.article.title.trim()&&this.state.isVerified;return r.a.createElement(E.a,{className:ce.a.NewArticleMain},r.a.createElement(ne.a,null,r.a.createElement(re.a,{sn:12}," ",r.a.createElement(T.a,null,r.a.createElement(F.a,{type:"file",accept:"image/*",className:ce.a.ImageUploader,onChange:function(){var t=Object(S.a)(x.a.mark((function t(a){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uploadImageCallBack(a);case 2:(n=t.sent).success&&e.setState({hasFeatureImage:!0,article:Object(D.a)(Object(D.a)({},e.state.article),{},{featureImage:n.data.link})}),console.log("Image uploaded to firebase"+n.data.link);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),this.state.hasFeatureImage?r.a.createElement("header",{className:ce.a.ImageUploaded}," ",r.a.createElement("img",{src:this.state.article.featureImage,className:ce.a.FeatureImg}),r.a.createElement(_.a,{onClick:function(){return e.deleteImageCallBack()}},"X")):""),r.a.createElement(T.a,null,r.a.createElement(F.a,{style:{borderRadius:0},type:"text",placeholder:"Title of the post...",name:"articleTitle",id:"articleTitle",onChange:function(t){return e.onChangeArticleTitle(t.target.value)},value:this.state.article.title,maxLength:"60"})),r.a.createElement(T.a,null,r.a.createElement(q.a,{ref:function(t){return e.reactQuillRef=t},value:this.state.article.content,onChange:function(t){return e.onChangeArticleContent(t)},placeholder:"Type in an article...",theme:"snow",modules:this.modules,formats:this.formats})),r.a.createElement(T.a,null,r.a.createElement(Y.a,{sitekey:"6LeF59IZAAAAAK3nudAyu9wQDemGRHGN1LltZ95C",render:"explicit",verifyCallback:this.verifyCallback,expiredCallback:this.expiredCallback}))," ",a?r.a.createElement(T.a,null,r.a.createElement(_.a,{style:{borderRadius:0},color:"dark",onClick:function(t){return e.submitArticle()}}," ","SUBMIT")):r.a.createElement(T.a,null,r.a.createElement(_.a,{style:{borderRadius:0},color:"dark",disabled:!0}," ","SUBMIT")))))}}]),a}(n.Component),ue=a(142),me=a(100),de=a.n(me),fe=I.firestore(),ge=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).positiveRating=function(){var e=fe.collection("Users").doc(n.props.auth.uid),t=fe.collection("Articles").doc(n.props.location.pathname.slice(9));return e.get().then((function(a){a.data().positiveRatings.includes(n.props.location.pathname.slice(9))||a.data().negativeRatings.includes(n.props.location.pathname.slice(9))?console.log("only rate somthing once!"):e.update({positiveRatings:[].concat(Object(ue.a)(a.data().positiveRatings),[n.props.location.pathname.slice(9)])}).then((function(){return t.update({positiveRatings:I.firestore.FieldValue.increment(1)})}))}))},n.negativeRating=function(){var e=fe.collection("Users").doc(n.props.auth.uid),t=fe.collection("Articles").doc(n.props.location.pathname.slice(9));return e.get().then((function(a){a.data().positiveRatings.includes(n.props.location.pathname.slice(9))||a.data().negativeRatings.includes(n.props.location.pathname.slice(9))?console.log("only rate somthing once!"):e.update({negativeRatings:[].concat(Object(ue.a)(a.data().negativeRatings),[n.props.location.pathname.slice(9)])}).then((function(){return t.update({negativeRatings:I.firestore.FieldValue.increment(1)})}))}))},n.state={},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{style:{paddingLeft:0,paddingRight:0}},r.a.createElement("div",{className:de.a.Rate},r.a.createElement("div",{className:de.a.Button},r.a.createElement(_.a,{style:{marginRight:3},size:"sm",outline:!0,color:"dark",onClick:function(){return e.positiveRating()}},"+"),r.a.createElement(_.a,{style:{marginLeft:3},size:"sm",outline:!0,color:"dark",onClick:function(){return e.negativeRating()}},"-"))),r.a.createElement("hr",{classeName:de.a.HorLine}))}}]),a}(n.Component),he=a(25),pe=a.n(he);var be=Object(o.b)((function(e){var t=e.firebase;return{auth:t.auth,profile:t.profile}}))((function(e){var t,a=e.data.positiveRatings/(e.data.negativeRatings+e.data.positiveRatings)*100;return r.a.createElement("div",null,r.a.createElement(E.a,{className:pe.a.ViewArticleContainer},r.a.createElement("div",{className:pe.a.Article},r.a.createElement("div",{className:pe.a.ArticleInfo},r.a.createElement("header",{className:pe.a.Title},r.a.createElement("h3",null,e.data.title))),e.auth.isEmpty?r.a.createElement("div",{className:pe.a.ImageContainer},r.a.createElement("img",{className:pe.a.Image,src:e.data.featureImage,alt:"Feature Image"})):r.a.createElement(l.b,{className:pe.a.ImageLink,to:{pathname:"article/"+e.data.id,state:{article:e.data}}},r.a.createElement("div",{className:pe.a.ImageContainer}," ",r.a.createElement("img",{src:e.data.featureImage,alt:"Card Image",className:pe.a.Image}))),r.a.createElement("div",{className:pe.a.ArticleMain},w()(null!==(t=e.data.content)&&""!==t&&(t=t.toString()).replace(/(<([^>]+)>)/gi,"")))),r.a.createElement("div",{className:pe.a.Info}," ",a?r.a.createElement(N.a,{style:{marginRight:4,borderRadius:0},color:"dark"},Math.round(a)," %"):r.a.createElement(N.a,{style:{marginRight:4,borderRadius:0},color:"dark"},"Not Rated"),e.data.commentCount?r.a.createElement(N.a,{style:{marginRight:4,borderRadius:0},color:"dark"},"R:",e.data.commentCount):r.a.createElement(N.a,{style:{marginRight:4,borderRadius:0},color:"dark"},"No Replies"),r.a.createElement(N.a,{style:{marginRight:4,borderRadius:0},color:"dark"},"P:",e.data.createUserID.slice(0,7)),r.a.createElement(N.a,{style:{marginRight:4,borderRadius:0},color:"dark"}," ","D:",function(e){var t=new Date(1e3*e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()}(e.data.createDate.seconds)))),r.a.createElement("hr",{className:pe.a.HorLine}))})),ve=a(140),Ce=a.n(ve),Ee=(a(448),I.firestore()),_e=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).nextArticle=function(){var e=n.state.lastArticle;Ee.collection("Articles").orderBy(n.state.orderBy,"desc").startAfter(e.createDate).limit(1).get().then((function(e){if(!e.empty){n.state.articles[n.state.articles.length-1];var t=[];e.forEach((function(e){var a=Object(D.a)({id:e.id},e.data());t.push(a)}));var a=n.state.articles.concat(t);n.setState({articles:a},(function(){n.setState({isLoaded:!0,lastArticle:n.state.articles[n.state.articles.length-1]})}))}})),window.scrollTo(0,document.body.scrollHeight)},n.getMyArticles=function(){Ee.collection("Articles").orderBy(n.state.orderBy,"desc").limit(n.state.limit).onSnapshot((function(e){if(!e.empty){var t=[];e.forEach((function(e){var a=Object(D.a)({id:e.id},e.data());t.push(a)})),n.setState({articles:t},(function(){n.setState({isLoaded:!0,lastArticle:n.state.articles[n.state.articles.length-1]})}))}}))},n.state={isLoaded:!1,articles:[],limit:10,lastArticle:null,orderBy:"createDate"},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getMyArticles()}},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{className:Ce.a.Main},this.state.isLoaded?this.state.articles.map((function(e,t){return r.a.createElement(be,{key:t,data:e})})):"",r.a.createElement("div",{className:Ce.a.MoreButton}," ",r.a.createElement(_.a,{size:"sm",outline:!0,color:"dark",style:{borderRadius:0},onClick:function(){return e.nextArticle()}},"Show 1 more post...")))}}]),a}(n.Component),ye=a(461),Ie=a(462),ke=a(463),Oe=a(464),Ae=a(465),Re=a(466),je=a(141),we=a.n(je),Ne=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).toggle=function(){n.setState({isOpen:!n.state.isOpen})},n.state={isOpen:!1},n}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){e.auth.isEmpty||I.auth().currentUser.getIdTokenResult().then((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ye.a,{className:we.a.Navbar,expand:"xs",color:"light",fixed:"top"},r.a.createElement(Ie.a,{style:{marginRight:0},href:"/"}," ",r.a.createElement("img",{className:we.a.Logo,src:"https://firebasestorage.googleapis.com/v0/b/react-blog-a39d2.appspot.com/o/LogoMakr_85Wfsy.png?alt=media&token=46c44cf2-16d2-4636-ac42-1e4ef459c9c1"})),r.a.createElement(ke.a,{className:"mr-auto",navbar:!0},this.props.auth.isEmpty?r.a.createElement(Oe.a,null,r.a.createElement(_.a,{style:{borderRadius:0},outline:!0,color:"dark",size:"sm",onClick:function(){return I.auth().signInAnonymously()}},"CREATE ID")):r.a.createElement(Oe.a,null,r.a.createElement(_.a,{style:{borderRadius:0},outline:!0,color:"dark",size:"sm",href:"/new-post"},"CREATE POST"))),r.a.createElement(Ae.a,{onClick:this.toggle}),r.a.createElement(Re.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(ke.a,{navbar:!0,className:"ml-auto"},this.props.auth.isEmpty?r.a.createElement(Oe.a,null," ",r.a.createElement(_.a,{style:{borderRadius:0},outline:!0,color:"dark",size:"sm"},"INFO")):r.a.createElement(Oe.a,null," ",r.a.createElement(_.a,{style:{borderRadius:0},outline:!0,color:"dark",size:"sm",onClick:function(){return I.auth().signOut()}},"LOGOUT"))))))}}]),a}(n.Component),Me=Object(o.b)((function(e){var t=e.firebase;return{auth:t.auth,profile:t.profile}}))(Ne),xe=a(45),Se=a.n(xe);function De(e){var t=new Date(1e3*e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()}var Le=function(e){return De=function(e){var t=new Date(1e3*e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()},r.a.createElement("div",null,r.a.createElement(E.a,{className:Se.a.CommentCardContainer},r.a.createElement("div",{className:Se.a.Comment},""!==e.data.featureImage?r.a.createElement("div",{className:Se.a.ImageContainer},r.a.createElement("img",{className:Se.a.Image,src:e.data.featureImage,alt:e.data.title})):null,r.a.createElement("div",{className:Se.a.CommentMain},w()(e.data.content))),r.a.createElement("div",{className:Se.a.Info}," ",r.a.createElement(N.a,{style:{marginRight:4}},e.data.createUserID.slice(0,7)),r.a.createElement(N.a,{style:{marginRight:4},"data-toggle":"tooltip","data-placement":"bottom",title:e.data.createDate.seconds}," ",De(e.data.createDate.seconds)))),r.a.createElement("hr",{className:Se.a.HorLine}))},Ue=I.firestore(),Be=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).getMyComments=function(){var e=n.props.location.pathname.slice(9);Ue.collection("Articles").doc(e).collection("Comments").orderBy("createDate","asc").onSnapshot((function(e){if(!e.empty){var t=[];e.forEach((function(e){var a=Object(D.a)({id:e.id},e.data());t.push(a)})),n.setState({comments:t},(function(){n.setState({isLoaded:!0})}))}}))},n.state={isLoaded:!1,comments:[]},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getMyComments()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,null,this.state.isLoaded?this.state.comments.map((function(e,t){return r.a.createElement(Le,{key:t,data:e})})):""))}}]),a}(n.Component),Te=function(e,t){var a=function(a){Object(b.a)(i,a);var n=Object(v.a)(i);function i(e){var t;return Object(h.a)(this,i),(t=n.call(this,e)).state={isPass:!1},t}return Object(p.a)(i,[{key:"componentDidMount",value:function(){var e=this;t.isEmpty?this.props.history.push("/"):m.auth().currentUser.getIdTokenResult().then((function(a){t.isEmpty?e.props.history.push("/"):e.setState({isPass:!0})}))}},{key:"render",value:function(){return this.state.isPass?r.a.createElement("div",null,r.a.createElement(e,{location:this.props.location,history:this.props.history,auth:t})):r.a.createElement("div",null,"checking...")}}]),i}(n.Component);return a},Fe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Me,null),this.props.auth.isLoaded?r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/"},r.a.createElement(_e,null)),r.a.createElement(C.b,{path:"/article/:id"},r.a.createElement(C.b,{path:"/article/:id",component:Te(ae,this.props.auth)}),r.a.createElement(C.b,{path:"/article/:id",component:Te(ge,this.props.auth)}),r.a.createElement(C.b,{path:"/article/:id",component:Te(Be,this.props.auth)}),r.a.createElement(C.b,{path:"/article/:id",component:Te($,this.props.auth)})),r.a.createElement(C.b,{path:"/new-post",component:Te(se,this.props.auth)}),r.a.createElement(C.b,{render:function(){return r.a.createElement(C.a,{to:{pathname:"/"}})}})):"")}}]),a}(n.Component),Ve=Object(o.b)((function(e){var t=e.firebase;return{auth:t.auth,profile:t.profile}}))(Object(C.g)(Fe));var He=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,{store:f},r.a.createElement(u.ReactReduxFirebaseProvider,g,r.a.createElement(l.a,null,r.a.createElement(Ve,null)))))};a(449);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(He,null)),document.getElementById("root"))},60:function(e,t,a){e.exports={Label:"NewComment_Label__23mnp",FeatureImg:"NewComment_FeatureImg__1UlFO",NewCommentMain:"NewComment_NewCommentMain__302FI",Info:"NewComment_Info__10Gth",ImageUploaded:"NewComment_ImageUploaded__2BZzV",ImageUploader:"NewComment_ImageUploader__OBJYg",TextEditor:"NewComment_TextEditor__1y38o"}},71:function(e,t,a){e.exports={Label:"NewArticle_Label__3mzQd",FeatureImg:"NewArticle_FeatureImg__2cQM3",NewArticleMain:"NewArticle_NewArticleMain__3PnKB",Info:"NewArticle_Info__Ajjgh",ImageUploaded:"NewArticle_ImageUploaded__39Ugm",ImageUploader:"NewArticle_ImageUploader__19EqI"}}},[[224,1,2]]]);
//# sourceMappingURL=main.9c8f6114.chunk.js.map